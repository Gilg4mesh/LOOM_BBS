<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title }}</title>

    {% block meta -%}
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{{ description }}">
    <meta property="og:url" content="{{ canonicalUrl }}">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ 'assets/meta.png' | prefixUrl }}">
    <meta property="og:image:width" content="830">
    <meta property="og:image:height" content="480">
    {%- endblock %}

    {% block head_extra -%}
    <link rel="shortcut icon" type="image/png" href="assets/icon.png">
    <link rel="stylesheet" type="text/css" href="https://images.ptt.cc/bbs/v2.25/bbs-common.css">
    <link rel="stylesheet" type="text/css" href="https://images.ptt.cc/bbs/v2.25/bbs-base.css" media="screen">
    <link rel="stylesheet" type="text/css" href="https://images.ptt.cc/bbs/v2.25/bbs-custom.css">
    <link rel="stylesheet" type="text/css" href="https://images.ptt.cc/bbs/v2.25/pushstream.css" media="screen">
    <link rel="stylesheet" type="text/css" href="https://images.ptt.cc/bbs/v2.25/bbs-print.css" media="print">
    <link rel="stylesheet" type="text/css" href="assets/style.scss">
    {%- endblock %}
  </head>

  <body>
    {% if showTopbar -%}
    <div id="topbar-container">
      <div id="topbar" class="bbs-content">

        <a id="logo" href="/">{%- include '_logo.njk' -%} BBS</a>
        <span>›</span>
        <a class="board" href="/"><span class="board-label">看板 </span>Gossiping</a>
        <div id="bbs-user-menu" class="user-menu right" href="#" style="display: none;">
            <div id="bbs-user" class="trigger right small">User</div>
            <div class="dropdown" style="width: 100%">
                <div class="item small"><a href="/about.njk">幫助</a></div>
                <div class="hotkey-mode-btn item small"><a href="#"><span class="hotkey-mode"></span>熱鍵</a></div>
                <div class="item small"><a href="register.njk">註冊暱稱</a></div>
                <div class="item small"><a href="#" data-toggle="modal" data-target="#loginModal">切換帳號</a></div>
            </div>
        </div>
        <a id="bbs-login" class="user-menu right small" href="#" data-toggle="modal" data-target="#loginModal">登入</a>
        <div id="bbs-more" class="user-menu right">
            <div class="trigger right small">⋯</div>
            <div class="dropdown" >
                <div class="item small"><a href="/about.njk">幫助</a></div>
                <div class="hotkey-mode-btn item small"><a href="#"><span class="hotkey-mode"></span>熱鍵</a></div>
            </div>
        </div>
      </div>
    </div>
    {%- endif %}

    {% block content -%}
    {%- endblock %}

    <div id="loginModal" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">選擇要使用的錢包</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="loginForm" onsubmit="return false">
              <div class="wrapper wrapper--injected">
                <div class="custom-control custom-radio">
                  <input id="loginFormC1" type="radio" name="accountSource" value="injected" class="custom-control-input" autocomplete="off">
                  <label for="loginFormC1" class="custom-control-label">
                    <span>從瀏覽器偵測錢包登入</span>
                    <div class="desc">
                      偵測到 <span class="--injectedProviderName">...</span>，狀態：<span class="--injectedProviderStatus">...</span><br>
                      <div class="desc-ok" style="display:none">
                        錢包地址：<span class="--injectedAccountAddress">...</span>
                      </div>
                      <div class="desc-err">
                        ...
                      </div>
                    </div>
                  </label>
                </div>
              </div>
              <div class="wrapper wrapper--seed">
                <div class="custom-control custom-radio">
                  <input id="loginFormC2" type="radio" name="accountSource" value="seed" class="custom-control-input" autocomplete="off">
                  <label for="loginFormC2" class="custom-control-label">
                    <span>使用助記詞登入</span>
                    <div class="desc">
                      <div class="desc-ok" style="display:none">
                        錢包地址：<span class="--seedAccountAddress">...</span>
                      </div>
                      <div class="desc-err">
                        尚未設定助記詞，按這裡隨機產生一組
                      </div>
                    </div>
                  </label>
                </div>
              </div>
              <div id="seedConfigArea">
                <hr>
                <strong>設定助記詞</strong>
                <div class="input-group">
                  <input type="text" name="seed" class="form-control">
                  <div class="input-group-append">
                    <button id="commitSeedPhrase" type="button" class="btn" style="height: 100%">確認</button>
                  </div>
                </div>
                <div style="margin-top: .2rem">
                  <button id="generateSeedPhrase" type="button" class="btn">產生</button>
                  <button id="deleteSeedPhrase" type="button" class="btn btn-danger">刪除</button>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button id="bbs-modal-login" class="btn btn-primary" disabled>登入</button>
            <button class="btn" data-dismiss="modal">取消</button>
          </div>
        </div>
      </div>
    </div>

    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/js/dist/util.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/js/dist/modal.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/gh/andy0130tw/web3.js-browser@v0.0.2-beta.55/build/web3.min.js"></script>
    <script language="javascript" type="text/javascript" src="scripts/layout.js"></script>

    {% block scripts_extra -%}
    {%- endblock %}

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <div id="wrapfabtest">
        <div class="adBanner" style="background-color: transparent; height: 1px; width: 1px;">
        </div>
    </div>
    <script async type="text/javascript">
        $(document).ready(function(){
            let domain = $("#wrapfabtest").height() > 0 ? '//www.googletagmanager.com' : domain = '//cdn.dett.cc'

            var script = document.createElement('script');
            script.src=domain+"/gtag/js?id=UA-140044770-1";
            document.body.appendChild(script);
            script.onload = function () {
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'UA-140044770-1');
            }
        })
    </script>
  </body>
</html>
